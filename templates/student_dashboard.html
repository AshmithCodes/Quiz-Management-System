{% extends "base.html" %}

{% block content %}
<h2>Student Dashboard</h2>
<p>Welcome, {{ session.username }}!</p>

<div class="row">
    <div class="col-md-6">
        <h3>Available Quizzes</h3>
        {% if quizzes %}
        <ul class="list-group">
            {% for quiz in quizzes %}
             <li class="list-group-item d-flex justify-content-between align-items-center">
                {{ quiz.title }}
                <small class="text-muted">By: {{ quiz.creator.username }}</small>
                {% if quiz.id in taken_quiz_ids %}
                    <span class="badge bg-secondary">Already Taken</span>
                {% else %}
                    <a href="{{ url_for('take_quiz', quiz_id=quiz.id) }}" class="btn btn-sm btn-primary">Take Quiz</a>
                {% endif %}
             </li>
            {% endfor %}
        </ul>
        {% else %}
        <p>No quizzes available at the moment.</p>
        {% endif %}
    </div>
    <div class="col-md-6">
        <h3>Your Past Results</h3>
         {% if results %}
        <ul class="list-group">
            {% for result in results %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                    <strong>{{ result.title }}</strong><br>
                    <small>Score: {{ result.score }}/{{ result.total_questions }} (Submitted: {{ result.submitted_at.strftime('%Y-%m-%d %H:%M') }})</small>
                </div>
                 <a href="{{ url_for('quiz_results', result_id=result.result_id) }}" class="btn btn-sm btn-info">View Details</a>
            </li>
            {% endfor %}
        </ul>
        {% else %}
        <p>You haven't taken any quizzes yet.</p>
        {% endif %}
    </div>
</div>


{% endblock %}